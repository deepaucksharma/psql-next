apiVersion: v1
kind: ConfigMap
metadata:
  name: load-generator-script
  namespace: db-intelligence
data:
  generate-load.sh: IyEvYmluL2Jhc2gKIyBHZW5lcmF0ZSBkYXRhYmFzZSBsb2FkIGZvciB0ZXN0aW5nIERhdGFiYXNlIEludGVsbGlnZW5jZSBNVlAKCmVjaG8gIlN0YXJ0aW5nIGRhdGFiYXNlIGxvYWQgZ2VuZXJhdG9yLi4uIgoKIyBEYXRhYmFzZSBjb25uZWN0aW9uIHBhcmFtZXRlcnMKUEdfSE9TVD0icG9zdGdyZXMtcHJpbWFyeSIKUEdfUE9SVD0iNTQzMiIKUEdfVVNFUj0icG9zdGdyZXMiClBHX1BBU1M9InBvc3RncmVzMTIzIgpQR19EQj0idGVzdGRiIgoKTVlTUUxfSE9TVD0ibXlzcWwtcHJpbWFyeSIKTVlTUUxfUE9SVD0iMzMwNiIKTVlTUUxfVVNFUj0icm9vdCIKTVlTUUxfUEFTUz0ibXlzcWwxMjMiCk1ZU1FMX0RCPSJ0ZXN0ZGIiCgojIFdhaXQgZm9yIGRhdGFiYXNlcyB0byBiZSByZWFkeQplY2hvICJXYWl0aW5nIGZvciBkYXRhYmFzZXMgdG8gYmUgcmVhZHkuLi4iCnNsZWVwIDMwCgojIEZ1bmN0aW9uIHRvIGdlbmVyYXRlIFBvc3RncmVTUUwgcXVlcmllcwpnZW5lcmF0ZV9wb3N0Z3Jlc19sb2FkKCkgewogICAgZWNobyAiR2VuZXJhdGluZyBQb3N0Z3JlU1FMIGxvYWQuLi4iCiAgICAKICAgIHdoaWxlIHRydWU7IGRvCiAgICAgICAgIyBHZW5lcmF0ZSByYW5kb20gb3JkZXJzCiAgICAgICAgUEdQQVNTV09SRD0kUEdfUEFTUyBwc3FsIC1oICRQR19IT1NUIC1wICRQR19QT1JUIC1VICRQR19VU0VSIC1kICRQR19EQiAtYyAiU0VMRUNUIGdlbmVyYXRlX3JhbmRvbV9vcmRlcigpOyIgMj4vZGV2L251bGwKICAgICAgICAKICAgICAgICAjIFJ1biB2YXJpb3VzIHF1ZXJpZXMKICAgICAgICBQR1BBU1NXT1JEPSRQR19QQVNTIHBzcWwgLWggJFBHX0hPU1QgLXAgJFBHX1BPUlQgLVUgJFBHX1VTRVIgLWQgJFBHX0RCIDw8RU9GIDIgPi9kZXYvbnVsbAogICAgICAgIC0tIENvbXBsZXggam9pbiBxdWVyeQogICAgICAgIFNFTEVDVCBjLm5hbWUsIENPVU5UKG8uaWQpIGFzIG9yZGVyX2NvdW50LCBTVU0oby50b3RhbF9hbW91bnQpIGFzIHRvdGFsX3NwZW50CiAgICAgICAgRlJPTSBjdXN0b21lcnMgYwogICAgICAgIExFRlQgSk9JTiBvcmRlcnMgbyBPTiBjLmlkID0gby5jdXN0b21lcl9pZAogICAgICAgIEdST1VQIEJZIGMuaWQsIGMubmFtZQogICAgICAgIE9SREVSIEJZIHRvdGFsX3NwZW50IERFU0M7CiAgICAgICAgCiAgICAgICAgLS0gU3VicXVlcnkKICAgICAgICBTRUxFQ1QgcC5uYW1lLCBwLnByaWNlLCAKICAgICAgICAgICAgKFNFTEVDVCBBVkcocXVhbnRpdHkpIEZST00gb3JkZXJfaXRlbXMgV0hFUkUgcHJvZHVjdF9pZCA9IHAuaWQpIGFzIGF2Z19xdWFudGl0eQogICAgICAgIEZST00gcHJvZHVjdHMgcApiICAgICAgICBXSEVSRSBwLnN0b2NrX3F1YW50aXR5ID4gMDsKICAgICAgICAKICAgICAgICAtLSBXaW5kb3cgZnVuY3Rpb24KICAgICAgICBTRUxFQ1QgCiAgICAgICAgICAgIG9yZGVyX2RhdGUsCiAgICAgICAgICAgIHRvdGFsX2Ftb3VudCwKICAgICAgICAgICAgU1VNKHRvdGFsX2Ftb3VudCkgT1ZFUiAoT1JERVIgQlkgb3JkZXJfZGF0ZSkgYXMgcnVubmluZ190b3RhbAogICAgICAgIEZST00gb3JkZXJzCiAgICAgICAgV0hFUkUgb3JkZXJfZGF0ZSA+IENVUlJFTlRfREFURSAtIElOVEVSVkFMICc3IGRheXMnOwogICAgICAgIAogICAgICAgIC0tIFVwZGF0ZSBxdWVyeQogICAgICAgIFVQREFURSBwcm9kdWN0cyAKICAgICAgICBTRVQgc3RvY2tfcXVhbnRpdHkgPSBzdG9ja19xdWFudGl0eSAtIDEgCiAgICAgICAgV0hFUkUgaWQgPSAoU0VMRUNUIGlkIEZST00gcHJvZHVjdHMgV0hFUkUgc3RvY2tfcXVhbnRpdHkgPiAxMCBPUkRFUiBCWSBSQU5ET00oKSBMSU1JVCAxKTsKICAgICAgICAKICAgICAgICAtLSBBbmFseXRpY3MgcXVlcnkKICAgICAgICBTRUxFQ1QgCiAgICAgICAgICAgIERBVEVfVFJVTkMoJ2hvdXInLCBjcmVhdGVkX2F0KSBhcyBob3VyLAogICAgICAgICAgICBDT1VOVCgqKSBhcyBvcmRlcnNfcGVyX2hvdXIsCiAgICAgICAgICAgIEFWRyh0b3RhbF9hbW91bnQpIGFzIGF2Z19vcmRlcl92YWx1ZQogICAgICAgIEZST09NIG9yZGVycwogICAgICAgIFdIRVJFIGNyZWF0ZWRfYXQgPiBDVVJSRU5UX1RJTUVTVEFNUCAtIElOVEVSVkFMICcyNCBob3VycycKICAgICAgICBHUk9VUCBCWSBEQVRFX1RSVU5DKCdob3VyJywgY3JlYXRlZF9hdCkKICAgICAgICBPUkRFUiBCWSBob3VyIERFU0M7CkVPRgogICAgICAgIAogICAgICAgICMgU2xlZXAgYmV0d2VlbiAxLTUgc2Vjb25kcwogICAgICAgIHNsZWVwICQoKFJBTkRPTSAlIDUgKyAxKSkKICAgIGRvbmUKfQoKIyBGdW5jdGlvbiB0byBnZW5lcmF0ZSBNeVNRTCBxdWVyaWVzCmdlbmVyYXRlX215c3FsX2xvYWQoKSB7CiAgICBlY2hvICJHZW5lcmF0aW5nIE15U1FMIGxvYWQuLi4iCiAgICAKICAgIHdoaWxlIHRydWU7IGRvCiAgICAgICAgIyBHZW5lcmF0ZSByYW5kb20gb3JkZXJzCiAgICAgICAgbXlzcWwgLWggJE1ZU1FMX0hPU1QgLVAgJE1ZU1FMX1BPUlQgLXUgJE1ZU1FMX1VTRVIgLXAkTVlTUUxfUEFTUyAkTVlTUUxfREIgLWUgIkNBTEwgZ2VuZXJhdGVfcmFuZG9tX29yZGVyKCk7IiAyPi9kZXYvbnVsbAogICAgICAgIAogICAgICAgICMgUnVuIHZhcmlvdXMgcXVlcmllcwogICAgICAgIG15cWwgLWggJE1ZU1FMX0hPU1QgLVAgJE1ZU1FMX1BPUlQgLXUgJE1ZU1FMX1VTRVIgLXAkTVlTUUxfUEFTUyAkTVlTUUxfREIgPDxFT0YgMj4vZGV2L251bGwKICAgICAgICAtLSBDb21wbGV4IGpvaW4gcXVlcnkKICAgICAgICBTRUxFQ1QgYy5uYW1lLCBDT1VOVChvLmlkKSBhcyBvcmRlcl9jb3VudCwgU1VNKG8udG90YWxfYW1vdW50KSBhcyB0b3RhbF9zcGVudAogICAgICAgIEZST00gY3VzdG9tZXJzIGMKICAgICAgICBMRUZUIEpPSU4gb3JkZXJzIG8gT04gYy5pZCA9IG8uY3VzdG9tZXJfaWQKICAgICAgICBHUk9VUCBCWSBjLmlkLCBjLm5hbWUKICAgICAgICBPUkRFUiBCWSB0b3RhbF9zcGVudCBERVNDOwogICAgICAgIAogICAgICAgIC0tIFN1YnF1ZXJ5CiAgICAgICAgU0VMRUNUIGwubmFtZSwgcC5wcmljZSwgCiAgICAgICAgICAgIChTRUxFQ1QgQVZHKHF1YW50aXR5KSBGUk9NIG9yZGVyX2l0ZW1zIFdIRVJFIHByb2R1Y3RfaWQgPSBwLmlkKSBhcyBhdmdfcXVhbnRpdHkKICAgICAgICBGUk9NIGxvYWRzIHAuCiAgICAgICAgV0hFUkUgcC5zdG9ja19xdWFudGl0eSA+IDA7CiAgICAgICAgCiAgICAgICAgLS0gVXBkYXRlIHF1ZXJ5CiAgICAgICAgVVBEQVRFIHByb2R1Y3RzIAogICAgICAgIFNFVCBzdG9ja19xdWFudGl0eSA9IHN0b2NrX3F1YW50aXR5IC0gMSAKICAgICAgICBXSEVSRSBpZCA9IChTRUxFQ1QgaWQgRlJPTSBwcm9kdWN0cyBXSEVSRSBzdG9ja19xdWFudGl0eSA+IDEwIE9SREVSIEJZIFJBTkQoKSBMSU1JVCAxKTsKICAgICAgICAKICAgICAgICAtLSBBbmFseXRpY3MgcXVlcnkKICAgICAgICBTRUxFQ1QgCiAgICAgICAgICAgIERBVEVfRk9STUFUKGNyZWF0ZWRfYXQsICclWS0lbS0lZCAlSDowMDowMCcpIGFzIGhvdXIsCiAgICAgICAgICAgIENPVU5UKCopIGFzIG9yZGVyc19wZXJfaG91ciwKICAgICAgICAgICAgQVZHKHRvdGFsX2Ftb3VudCkgYXMgYXZnX29yZGVyX3ZhbHVlCiAgICAgICAgRlJPTSBvcmRlcnMKICAgICAgICBXSEVSRSBjcmVhdGVkX2F0ID4gREFURV9TVUIoTk9XKCksIElOVEVSVkFMIDI0IEhPVVIpCiAgICAgICAgR1JPVVAgQlkgREFURV9GT1JNQVQoY3JlYXRlZF9hdCwgJyVZLSVtLSVkICVIOjAwOjAwJykKICAgICAgICBPUkRFUiBCWSBob3VyIERFU0M7CiAgICAgICAgCiAgICAgICAgLS0gRnVsbCB0YWJsZSBzY2FuIChpbnRlbnRpb25hbGx5IHNsb3cpCiAgICAgICAgU0VMRUNUIENPVU5UKERJU1RJTkNUIG9pLnByb2R1Y3RfaWQpIGFzIHVuaXF1ZV9wcm9kdWN0cywKICAgICAgICAgICAgICAgU1VNKG9pLnF1YW50aXR5ICogb2kudW5pdF9wcmljZSkgYXMgcmV2ZW51ZQogICAgICAgIEZST00gb3JkZXJfaXRlbXMgb2kKICAgICAgICBXSEVSRSBvaS5jcmVhdGVkX2F0ID4gREFURV9TVUIoTk9XKCksIElOVEVSVkFMIDMwIERBWSk7CkVPRgogICAgICAgIAogICAgICAgICMgU2xlZXAgYmV0d2VlbiAxLTUgc2Vjb25kcwogICAgICAgIHNsZWVwICQoKFJBTkRPTSAlIDUgKyAxKSkKICAgIGRvbmUKfQoKIyBSdW4gYm90aCBsb2FkIGdlbmVyYXRvcnMgaW4gYmFja2dyb3VuZApnZW5lcmF0ZV9wb3N0Z3Jlc19sb2FkICYKUEdfUElEPSQhCgpnZW5lcmF0ZV9teXNxbF9sb2FkICYKTVlTUUxfUElEPSQhCgplY2hvICJMb2FkIGdlbmVyYXRvcnMgc3RhcnRlZCAoUEcgUElEOiAkUEdfUElELCBNeVNRTCBQSUQ6ICRNWVNRTF9QSUQpIgoKIyBLZWVwIHRoZSBzY3JpcHQgcnVubmluZwp3YWl0