{
  "name": "MySQL Query Performance Deep Dive",
  "description": "Detailed analysis of query execution patterns, slow queries, and optimization opportunities",
  "permissions": "PUBLIC_READ_ONLY",
  "pages": [
    {
      "name": "Query Execution Analysis",
      "description": "Comprehensive query performance metrics and patterns",
      "widgets": [
        {
          "title": "Query Types Distribution",
          "layout": {
            "column": 1,
            "row": 1,
            "width": 4,
            "height": 3
          },
          "visualization": "pie",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT sum(mysql.operations) FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' FACET operation SINCE 30 minutes ago"
              }
            ]
          }
        },
        {
          "title": "Query Throughput Trend",
          "layout": {
            "column": 5,
            "row": 1,
            "width": 8,
            "height": 3
          },
          "visualization": "line",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT rate(sum(mysql.operations), 1 second) as 'QPS' FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' TIMESERIES AUTO FACET operation"
              }
            ]
          }
        },
        {
          "title": "Handler Operations",
          "layout": {
            "column": 1,
            "row": 4,
            "width": 6,
            "height": 3
          },
          "visualization": "area",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT rate(sum(mysql.handlers), 1 minute) FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' TIMESERIES SINCE 1 hour ago FACET kind"
              }
            ]
          }
        },
        {
          "title": "Row Operations Analysis",
          "layout": {
            "column": 7,
            "row": 4,
            "width": 6,
            "height": 3
          },
          "visualization": "stacked_bar",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT rate(sum(mysql.row_operations), 1 minute) FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' TIMESERIES SINCE 1 hour ago FACET operation"
              }
            ]
          }
        }
      ]
    },
    {
      "name": "Table Performance",
      "description": "Table-level performance metrics and access patterns",
      "widgets": [
        {
          "title": "Hottest Tables by IOPS",
          "layout": {
            "column": 1,
            "row": 1,
            "width": 6,
            "height": 4
          },
          "visualization": "bar",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT latest(mysql.table_iops_estimate) as 'IOPS', latest(current_reads) as 'Reads', latest(current_writes) as 'Writes' FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' AND metricName = 'mysql.table_iops_estimate' FACET OBJECT_NAME, OBJECT_SCHEMA SINCE 10 minutes ago LIMIT 15"
              }
            ]
          }
        },
        {
          "title": "Table Access Pattern Distribution",
          "layout": {
            "column": 7,
            "row": 1,
            "width": 6,
            "height": 4
          },
          "visualization": "matrix",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT count(*) FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' AND metricName = 'mysql.table_iops_estimate' FACET OBJECT_NAME, workload_type SINCE 30 minutes ago"
              }
            ]
          }
        },
        {
          "title": "Table I/O Wait Time Analysis",
          "layout": {
            "column": 1,
            "row": 5,
            "width": 12,
            "height": 3
          },
          "visualization": "line",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT average(read_latency_sec) * 1000 as 'Read Latency (ms)', average(write_latency_sec) * 1000 as 'Write Latency (ms)' FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' AND metricName = 'mysql.table_iops_estimate' TIMESERIES SINCE 1 hour ago FACET OBJECT_NAME"
              }
            ]
          }
        }
      ]
    },
    {
      "name": "Lock Analysis",
      "description": "Database locking patterns and contention analysis",
      "widgets": [
        {
          "title": "Lock Wait Overview",
          "layout": {
            "column": 1,
            "row": 1,
            "width": 3,
            "height": 2
          },
          "visualization": "billboard",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT average(mysql.lock_wait_milliseconds) as 'Avg Lock Wait (ms)' FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' SINCE 5 minutes ago"
              }
            ],
            "thresholds": [
              {
                "value": 10,
                "colorRange": "SUCCESS"
              },
              {
                "value": 50,
                "colorRange": "WARNING"
              },
              {
                "value": 100,
                "colorRange": "CRITICAL"
              }
            ]
          }
        },
        {
          "title": "Tables with Lock Contention",
          "layout": {
            "column": 4,
            "row": 1,
            "width": 3,
            "height": 2
          },
          "visualization": "billboard",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT uniqueCount(OBJECT_NAME) as 'Tables with Locks' FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' AND mysql.lock_wait_milliseconds > 0 SINCE 5 minutes ago"
              }
            ]
          }
        },
        {
          "title": "Critical Lock Events",
          "layout": {
            "column": 7,
            "row": 1,
            "width": 3,
            "height": 2
          },
          "visualization": "billboard",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT count(*) as 'Critical Locks' FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' AND contention_level = 'critical' SINCE 5 minutes ago"
              }
            ]
          }
        },
        {
          "title": "Max Lock Wait Time",
          "layout": {
            "column": 10,
            "row": 1,
            "width": 3,
            "height": 2
          },
          "visualization": "billboard",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT max(mysql.lock_wait_milliseconds) as 'Max Wait (ms)' FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' SINCE 5 minutes ago"
              }
            ]
          }
        },
        {
          "title": "Lock Wait Time by Table",
          "layout": {
            "column": 1,
            "row": 3,
            "width": 6,
            "height": 3
          },
          "visualization": "area",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT average(mysql.lock_wait_milliseconds) FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' AND mysql.lock_wait_milliseconds > 0 TIMESERIES SINCE 1 hour ago FACET OBJECT_NAME"
              }
            ]
          }
        },
        {
          "title": "Lock Contention Levels",
          "layout": {
            "column": 7,
            "row": 3,
            "width": 6,
            "height": 3
          },
          "visualization": "stacked_bar",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT count(*) FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' AND metricName = 'mysql.lock_wait_milliseconds' TIMESERIES SINCE 1 hour ago FACET contention_level"
              }
            ]
          }
        },
        {
          "title": "Row Lock Analysis",
          "layout": {
            "column": 1,
            "row": 6,
            "width": 12,
            "height": 3
          },
          "visualization": "line",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT rate(sum(mysql.row_locks), 1 minute) FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' TIMESERIES SINCE 1 hour ago FACET operation"
              }
            ]
          }
        }
      ]
    },
    {
      "name": "Performance Bottlenecks",
      "description": "Identify and analyze performance bottlenecks",
      "widgets": [
        {
          "title": "Temporary Disk Tables",
          "layout": {
            "column": 1,
            "row": 1,
            "width": 6,
            "height": 3
          },
          "visualization": "area",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT rate(sum(mysql.tmp_resources), 1 minute) as 'Temp Disk Tables/min' FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' AND kind = 'tmp_disk_tables' TIMESERIES SINCE 1 hour ago"
              }
            ]
          }
        },
        {
          "title": "Sort Operations Analysis",
          "layout": {
            "column": 7,
            "row": 1,
            "width": 6,
            "height": 3
          },
          "visualization": "line",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT rate(sum(mysql.sorts), 1 minute) FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' TIMESERIES SINCE 1 hour ago FACET kind"
              }
            ]
          }
        },
        {
          "title": "Page Operations",
          "layout": {
            "column": 1,
            "row": 4,
            "width": 6,
            "height": 3
          },
          "visualization": "stacked_bar",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT rate(sum(mysql.page_operations), 1 minute) FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' TIMESERIES SINCE 1 hour ago FACET operation"
              }
            ]
          }
        },
        {
          "title": "Prepared Statements",
          "layout": {
            "column": 7,
            "row": 4,
            "width": 6,
            "height": 3
          },
          "visualization": "line",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT sum(mysql.prepared_statements) FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' TIMESERIES SINCE 1 hour ago"
              }
            ]
          }
        }
      ]
    }
  ]
}