{
  "name": "MySQL Operational Excellence",
  "description": "Real-time operational monitoring, alerting, and capacity planning for MySQL databases",
  "permissions": "PUBLIC_READ_ONLY",
  "pages": [
    {
      "name": "Real-Time Operations",
      "description": "Live operational metrics and system health",
      "widgets": [
        {
          "title": "System Health Status",
          "layout": {
            "column": 1,
            "row": 1,
            "width": 12,
            "height": 1
          },
          "visualization": "event_feed",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT latest(mysql.up) as 'Status', latest(mysql.uptime_seconds) / 3600 as 'Uptime (hours)', latest(mysql.threads) as 'Active Connections', latest(mysql.buffer_pool_usage_bytes) / latest(mysql.buffer_pool_limit_bytes) * 100 as 'Buffer Pool %' FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' SINCE 1 minute ago"
              }
            ]
          }
        },
        {
          "title": "Connection Status",
          "layout": {
            "column": 1,
            "row": 2,
            "width": 3,
            "height": 3
          },
          "visualization": "line",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT latest(mysql.threads) as 'Connected', latest(mysql.threads, WHERE kind = 'running') as 'Running', latest(mysql.threads, WHERE kind = 'cached') as 'Cached' FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' TIMESERIES SINCE 30 minutes ago"
              }
            ]
          }
        },
        {
          "title": "Query Response Time",
          "layout": {
            "column": 4,
            "row": 2,
            "width": 3,
            "height": 3
          },
          "visualization": "line",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT percentile(mysql.table_io_wait_time_nanoseconds / 1000000, 50) as 'P50', percentile(mysql.table_io_wait_time_nanoseconds / 1000000, 95) as 'P95', percentile(mysql.table_io_wait_time_nanoseconds / 1000000, 99) as 'P99' FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' TIMESERIES SINCE 1 hour ago"
              }
            ]
          }
        },
        {
          "title": "Buffer Pool Efficiency",
          "layout": {
            "column": 7,
            "row": 2,
            "width": 3,
            "height": 3
          },
          "visualization": "area",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT latest(mysql.buffer_pool_pages) as 'Data Pages', latest(mysql.buffer_pool_pages, WHERE kind = 'free') as 'Free Pages', latest(mysql.buffer_pool_pages, WHERE kind = 'misc') as 'Misc Pages' FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' TIMESERIES SINCE 1 hour ago"
              }
            ]
          }
        },
        {
          "title": "Operation Mix",
          "layout": {
            "column": 10,
            "row": 2,
            "width": 3,
            "height": 3
          },
          "visualization": "stacked_bar",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT rate(sum(mysql.operations), 1 minute) FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' TIMESERIES 5 minutes FACET operation"
              }
            ]
          }
        }
      ]
    },
    {
      "name": "Performance Alerts",
      "description": "Critical performance indicators and alert conditions",
      "widgets": [
        {
          "title": "Alert Conditions Status",
          "layout": {
            "column": 1,
            "row": 1,
            "width": 12,
            "height": 2
          },
          "visualization": "table",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT latest(OBJECT_NAME) as 'Resource', latest(contention_level) as 'Lock Status', latest(mysql.lock_wait_milliseconds) as 'Lock Wait (ms)', latest(workload_type) as 'Workload Type', latest(mysql.table_iops_estimate) as 'IOPS' FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' AND (contention_level != 'low' OR mysql.table_iops_estimate > 100) FACET OBJECT_NAME SINCE 5 minutes ago LIMIT 10"
              }
            ]
          }
        },
        {
          "title": "Critical Metrics Trend",
          "layout": {
            "column": 1,
            "row": 3,
            "width": 6,
            "height": 3
          },
          "visualization": "line",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT max(mysql.lock_wait_milliseconds) as 'Max Lock Wait', count(*) as 'Lock Events' FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' AND mysql.lock_wait_milliseconds > 0 TIMESERIES SINCE 1 hour ago"
              }
            ],
            "thresholds": [
              {
                "value": 100,
                "title": "Critical Threshold"
              }
            ]
          }
        },
        {
          "title": "Resource Saturation Indicators",
          "layout": {
            "column": 7,
            "row": 3,
            "width": 6,
            "height": 3
          },
          "visualization": "line",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT latest(mysql.buffer_pool_usage_bytes) / latest(mysql.buffer_pool_limit_bytes) * 100 as 'Buffer Pool %', latest(mysql.threads) / 151 * 100 as 'Connection %', rate(sum(mysql.tmp_resources, WHERE kind = 'tmp_disk_tables'), 1 minute) as 'Disk Temp Tables/min' FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' TIMESERIES SINCE 1 hour ago"
              }
            ]
          }
        }
      ]
    },
    {
      "name": "Capacity Planning",
      "description": "Resource utilization trends and capacity forecasting",
      "widgets": [
        {
          "title": "Storage Growth Trend",
          "layout": {
            "column": 1,
            "row": 1,
            "width": 6,
            "height": 3
          },
          "visualization": "line",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT sum(mysql.buffer_pool_pages) * 16 / 1024 as 'Buffer Pool (MB)', rate(sum(mysql.page_operations, WHERE operation = 'written'), 1 hour) * 16 / 1024 as 'Write Rate (MB/hr)' FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' TIMESERIES SINCE 24 hours ago"
              }
            ]
          }
        },
        {
          "title": "Connection Pool Utilization",
          "layout": {
            "column": 7,
            "row": 1,
            "width": 6,
            "height": 3
          },
          "visualization": "area",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT latest(mysql.threads) as 'Active', 151 - latest(mysql.threads) as 'Available' FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' TIMESERIES SINCE 6 hours ago"
              }
            ]
          }
        },
        {
          "title": "IOPS Capacity Analysis",
          "layout": {
            "column": 1,
            "row": 4,
            "width": 4,
            "height": 3
          },
          "visualization": "billboard",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT average(sum(mysql.table_iops_estimate)) as 'Avg IOPS', max(sum(mysql.table_iops_estimate)) as 'Peak IOPS', percentile(sum(mysql.table_iops_estimate), 95) as 'P95 IOPS' FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' SINCE 24 hours ago"
              }
            ]
          }
        },
        {
          "title": "Resource Efficiency Score",
          "layout": {
            "column": 5,
            "row": 4,
            "width": 4,
            "height": 3
          },
          "visualization": "gauge",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT (100 - (rate(sum(mysql.tmp_resources, WHERE kind = 'tmp_disk_tables'), 1 minute) / rate(sum(mysql.tmp_resources), 1 minute) * 100)) as 'Memory Efficiency %' FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' SINCE 1 hour ago"
              }
            ],
            "thresholds": [
              {
                "value": 90,
                "colorRange": "SUCCESS"
              },
              {
                "value": 70,
                "colorRange": "WARNING"
              },
              {
                "value": 0,
                "colorRange": "CRITICAL"
              }
            ]
          }
        },
        {
          "title": "Growth Projections",
          "layout": {
            "column": 9,
            "row": 4,
            "width": 4,
            "height": 3
          },
          "visualization": "table",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT latest(OBJECT_NAME) as 'Table', latest(mysql.table_iops_estimate) as 'Current IOPS', latest(mysql.table_iops_estimate) * 1.2 as 'Projected IOPS (20% growth)' FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' AND metricName = 'mysql.table_iops_estimate' FACET OBJECT_NAME SINCE 10 minutes ago LIMIT 5"
              }
            ]
          }
        }
      ]
    },
    {
      "name": "Optimization Summary",
      "description": "Consolidated optimization opportunities and impact analysis",
      "widgets": [
        {
          "title": "Top Optimization Opportunities",
          "layout": {
            "column": 1,
            "row": 1,
            "width": 12,
            "height": 3
          },
          "visualization": "table",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT latest(OBJECT_NAME) as 'Table', latest(mysql.table_iops_estimate) as 'IOPS', latest(workload_type) as 'Workload', latest(time_category) as 'Time Period', CASE WHEN latest(mysql.table_iops_estimate) > 50 THEN 'Add Index' WHEN latest(workload_type) = 'write_intensive' THEN 'Optimize Writes' ELSE 'Monitor' END as 'Recommendation' FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' AND metricName = 'mysql.table_iops_estimate' FACET OBJECT_NAME SINCE 30 minutes ago LIMIT 10"
              }
            ]
          }
        },
        {
          "title": "Performance Impact Matrix",
          "layout": {
            "column": 1,
            "row": 4,
            "width": 6,
            "height": 3
          },
          "visualization": "matrix",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT count(*) FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' AND metricName = 'mysql.table_iops_estimate' FACET workload_type, time_category SINCE 1 hour ago"
              }
            ]
          }
        },
        {
          "title": "Optimization ROI Estimate",
          "layout": {
            "column": 7,
            "row": 4,
            "width": 6,
            "height": 3
          },
          "visualization": "bar",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT uniqueCount(INDEX_NAME, WHERE index_recommendation LIKE '%DROPPING%') * 10 as 'CPU Savings %', uniqueCount(INDEX_NAME, WHERE index_recommendation LIKE '%DROPPING%') * 50 as 'Storage Savings MB', uniqueCount(TABLE_NAME, WHERE numeric(selectivity_pct) < 30) * 5 as 'Query Speed Improvement %' FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' AND metricName = 'mysql.index_effectiveness_score' SINCE 1 hour ago"
              }
            ]
          }
        }
      ]
    }
  ]
}