{
  "name": "MySQL Index & I/O Optimization",
  "description": "Comprehensive index effectiveness analysis and I/O performance optimization insights",
  "permissions": "PUBLIC_READ_ONLY",
  "pages": [
    {
      "name": "Index Health Overview",
      "description": "High-level index effectiveness and recommendations",
      "widgets": [
        {
          "title": "Index Health Score",
          "layout": {
            "column": 1,
            "row": 1,
            "width": 3,
            "height": 3
          },
          "visualization": "gauge",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT average(mysql.index_effectiveness_score) as 'Index Health' FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' SINCE 30 minutes ago"
              }
            ],
            "thresholds": [
              {
                "value": 80,
                "colorRange": "SUCCESS"
              },
              {
                "value": 50,
                "colorRange": "WARNING"
              },
              {
                "value": 0,
                "colorRange": "CRITICAL"
              }
            ]
          }
        },
        {
          "title": "Index Statistics",
          "layout": {
            "column": 4,
            "row": 1,
            "width": 3,
            "height": 3
          },
          "visualization": "billboard_comparison",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT uniqueCount(INDEX_NAME) as 'Total Indexes', uniqueCount(INDEX_NAME, WHERE usage_count = '0') as 'Unused', uniqueCount(INDEX_NAME, WHERE index_recommendation LIKE '%DROPPING%') as 'Should Drop', uniqueCount(INDEX_NAME, WHERE index_recommendation = 'OK') as 'Healthy' FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' AND metricName = 'mysql.index_effectiveness_score' SINCE 30 minutes ago"
              }
            ]
          }
        },
        {
          "title": "Index Recommendations Summary",
          "layout": {
            "column": 7,
            "row": 1,
            "width": 6,
            "height": 3
          },
          "visualization": "pie",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT count(*) FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' AND metricName = 'mysql.index_effectiveness_score' FACET index_recommendation SINCE 30 minutes ago"
              }
            ]
          }
        },
        {
          "title": "Index Effectiveness by Table",
          "layout": {
            "column": 1,
            "row": 4,
            "width": 12,
            "height": 4
          },
          "visualization": "heatmap",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT average(mysql.index_effectiveness_score) FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' FACET TABLE_NAME, INDEX_NAME SINCE 1 hour ago"
              }
            ]
          }
        }
      ]
    },
    {
      "name": "Index Details & Actions",
      "description": "Detailed index analysis and actionable recommendations",
      "widgets": [
        {
          "title": "Unused Indexes (Candidates for Removal)",
          "layout": {
            "column": 1,
            "row": 1,
            "width": 12,
            "height": 3
          },
          "visualization": "table",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT latest(TABLE_SCHEMA) as 'Database', latest(TABLE_NAME) as 'Table', latest(INDEX_NAME) as 'Index', latest(COLUMN_NAME) as 'Column', latest(selectivity_pct) as 'Selectivity %', latest(usage_count) as 'Usage' FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' AND metricName = 'mysql.index_effectiveness_score' AND usage_count = '0' AND INDEX_NAME != 'PRIMARY' FACET TABLE_SCHEMA, TABLE_NAME, INDEX_NAME SINCE 1 hour ago LIMIT 20"
              }
            ]
          }
        },
        {
          "title": "Low Selectivity Indexes",
          "layout": {
            "column": 1,
            "row": 4,
            "width": 6,
            "height": 3
          },
          "visualization": "bar",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT latest(numeric(selectivity_pct)) as 'Selectivity %' FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' AND metricName = 'mysql.index_effectiveness_score' AND numeric(selectivity_pct) < 50 AND numeric(selectivity_pct) > 0 FACET INDEX_NAME, TABLE_NAME SINCE 30 minutes ago LIMIT 10"
              }
            ]
          }
        },
        {
          "title": "Large Index Analysis",
          "layout": {
            "column": 7,
            "row": 4,
            "width": 6,
            "height": 3
          },
          "visualization": "table",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT latest(TABLE_NAME) as 'Table', latest(INDEX_NAME) as 'Index', latest(index_recommendation) as 'Issue' FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' AND index_recommendation LIKE '%LARGE%' FACET TABLE_NAME, INDEX_NAME SINCE 30 minutes ago"
              }
            ]
          }
        }
      ]
    },
    {
      "name": "I/O Performance Analysis",
      "description": "Deep dive into I/O patterns and performance",
      "widgets": [
        {
          "title": "I/O Operations Overview",
          "layout": {
            "column": 1,
            "row": 1,
            "width": 4,
            "height": 2
          },
          "visualization": "billboard",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT rate(sum(mysql.table_io_wait_count), 1 second) as 'Total IOPS' FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' SINCE 5 minutes ago"
              }
            ]
          }
        },
        {
          "title": "Average I/O Wait Time",
          "layout": {
            "column": 5,
            "row": 1,
            "width": 4,
            "height": 2
          },
          "visualization": "billboard",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT average(mysql.table_io_wait_time_nanoseconds) / 1000000 as 'Avg Wait (ms)' FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' SINCE 5 minutes ago"
              }
            ],
            "thresholds": [
              {
                "value": 5,
                "colorRange": "SUCCESS"
              },
              {
                "value": 20,
                "colorRange": "WARNING"
              },
              {
                "value": 50,
                "colorRange": "CRITICAL"
              }
            ]
          }
        },
        {
          "title": "Index I/O Efficiency",
          "layout": {
            "column": 9,
            "row": 1,
            "width": 4,
            "height": 2
          },
          "visualization": "billboard",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT (sum(mysql.index_io_wait_count) / sum(mysql.table_io_wait_count)) * 100 as 'Index Usage %' FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' SINCE 5 minutes ago"
              }
            ]
          }
        },
        {
          "title": "Table vs Index I/O",
          "layout": {
            "column": 1,
            "row": 3,
            "width": 6,
            "height": 3
          },
          "visualization": "area",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT rate(sum(mysql.table_io_wait_count), 1 second) as 'Table I/O', rate(sum(mysql.index_io_wait_count), 1 second) as 'Index I/O' FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' TIMESERIES SINCE 1 hour ago"
              }
            ]
          }
        },
        {
          "title": "I/O Wait Time Distribution",
          "layout": {
            "column": 7,
            "row": 3,
            "width": 6,
            "height": 3
          },
          "visualization": "histogram",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT histogram(mysql.table_io_wait_time_nanoseconds / 1000000, width: 5, buckets: 20) FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' SINCE 30 minutes ago"
              }
            ]
          }
        },
        {
          "title": "Top Tables by I/O Wait",
          "layout": {
            "column": 1,
            "row": 6,
            "width": 12,
            "height": 3
          },
          "visualization": "bar",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT latest(read_latency_sec) * 1000 as 'Read Latency (ms)', latest(write_latency_sec) * 1000 as 'Write Latency (ms)', latest(mysql.table_iops_estimate) as 'IOPS' FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' AND metricName = 'mysql.table_iops_estimate' FACET OBJECT_NAME SINCE 10 minutes ago LIMIT 10"
              }
            ]
          }
        }
      ]
    },
    {
      "name": "Optimization Actions",
      "description": "Prioritized optimization recommendations",
      "widgets": [
        {
          "title": "High Impact Optimization Opportunities",
          "layout": {
            "column": 1,
            "row": 1,
            "width": 12,
            "height": 3
          },
          "visualization": "table",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT latest(TABLE_SCHEMA) as 'Database', latest(TABLE_NAME) as 'Table', latest(INDEX_NAME) as 'Index', latest(index_recommendation) as 'Action Required', latest(mysql.index_effectiveness_score) as 'Score', latest(usage_count) as 'Usage Count' FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' AND metricName = 'mysql.index_effectiveness_score' AND index_recommendation != 'OK' FACET TABLE_SCHEMA, TABLE_NAME, INDEX_NAME SINCE 1 hour ago LIMIT 25"
              }
            ]
          }
        },
        {
          "title": "Estimated Storage Savings",
          "layout": {
            "column": 1,
            "row": 4,
            "width": 4,
            "height": 3
          },
          "visualization": "billboard",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT uniqueCount(INDEX_NAME, WHERE index_recommendation LIKE '%DROPPING%' AND INDEX_NAME != 'PRIMARY') * 50 as 'Est. MB Saved' FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' AND metricName = 'mysql.index_effectiveness_score' SINCE 1 hour ago"
              }
            ]
          }
        },
        {
          "title": "Performance Impact Score",
          "layout": {
            "column": 5,
            "row": 4,
            "width": 4,
            "height": 3
          },
          "visualization": "gauge",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT (sum(mysql.table_iops_estimate, WHERE workload_type = 'read_intensive') / sum(mysql.table_iops_estimate)) * 100 as 'Read Optimized %' FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' SINCE 30 minutes ago"
              }
            ]
          }
        },
        {
          "title": "Workload Distribution",
          "layout": {
            "column": 9,
            "row": 4,
            "width": 4,
            "height": 3
          },
          "visualization": "pie",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT count(*) FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' AND metricName = 'mysql.table_iops_estimate' FACET workload_type SINCE 30 minutes ago"
              }
            ]
          }
        }
      ]
    }
  ]
}