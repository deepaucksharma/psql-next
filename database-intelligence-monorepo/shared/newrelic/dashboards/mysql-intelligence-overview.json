{
  "name": "MySQL Intelligence Overview",
  "description": "Comprehensive MySQL performance monitoring with query intelligence, index effectiveness, and resource utilization insights",
  "permissions": "PUBLIC_READ_ONLY",
  "pages": [
    {
      "name": "Executive Summary",
      "description": "High-level MySQL health and performance indicators",
      "widgets": [
        {
          "title": "MySQL Availability",
          "layout": {
            "column": 1,
            "row": 1,
            "width": 3,
            "height": 2
          },
          "visualization": "billboard",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT percentage(count(*), WHERE mysql.up = 1) as 'Uptime %' FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' SINCE 1 hour ago"
              }
            ],
            "thresholds": [
              {
                "value": 99.9,
                "colorRange": "SUCCESS"
              },
              {
                "value": 95,
                "colorRange": "WARNING"
              },
              {
                "value": 0,
                "colorRange": "CRITICAL"
              }
            ]
          }
        },
        {
          "title": "Current QPS",
          "layout": {
            "column": 4,
            "row": 1,
            "width": 3,
            "height": 2
          },
          "visualization": "billboard",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT rate(sum(mysql.operations), 1 second) as 'Queries/sec' FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' AND operation = 'select' SINCE 5 minutes ago"
              }
            ]
          }
        },
        {
          "title": "Buffer Pool Hit Ratio",
          "layout": {
            "column": 7,
            "row": 1,
            "width": 3,
            "height": 2
          },
          "visualization": "billboard",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT (1 - (sum(mysql.buffer_pool_operations) / sum(mysql.buffer_pool_operations))) * 100 as 'Hit Ratio %' FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' AND (operation = 'read_requests' OR operation = 'reads') SINCE 5 minutes ago"
              }
            ],
            "thresholds": [
              {
                "value": 95,
                "colorRange": "SUCCESS"
              },
              {
                "value": 80,
                "colorRange": "WARNING"
              },
              {
                "value": 0,
                "colorRange": "CRITICAL"
              }
            ]
          }
        },
        {
          "title": "Active Connections",
          "layout": {
            "column": 10,
            "row": 1,
            "width": 3,
            "height": 2
          },
          "visualization": "billboard",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT latest(mysql.threads) as 'Active Threads' FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' AND kind = 'connected' SINCE 5 minutes ago"
              }
            ]
          }
        },
        {
          "title": "Query Performance Trend",
          "layout": {
            "column": 1,
            "row": 3,
            "width": 6,
            "height": 3
          },
          "visualization": "area",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT rate(sum(mysql.operations), 1 second) FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' TIMESERIES SINCE 1 hour ago FACET operation"
              }
            ],
            "colors": {
              "seriesColors": [
                {
                  "value": "select",
                  "color": "#00C88C"
                },
                {
                  "value": "insert",
                  "color": "#F0BA00"
                },
                {
                  "value": "update",
                  "color": "#FF7F0E"
                },
                {
                  "value": "delete",
                  "color": "#DC382D"
                }
              ]
            }
          }
        },
        {
          "title": "Buffer Pool Utilization",
          "layout": {
            "column": 7,
            "row": 3,
            "width": 6,
            "height": 3
          },
          "visualization": "line",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT average(mysql.buffer_pool_usage_bytes) / average(mysql.buffer_pool_limit_bytes) * 100 as 'Usage %', average(mysql.buffer_pool_pages) as 'Page Count' FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' TIMESERIES SINCE 1 hour ago"
              }
            ]
          }
        }
      ]
    },
    {
      "name": "Query Intelligence",
      "description": "Deep insights into query performance and optimization opportunities",
      "widgets": [
        {
          "title": "Top Tables by I/O",
          "layout": {
            "column": 1,
            "row": 1,
            "width": 6,
            "height": 3
          },
          "visualization": "bar",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT latest(mysql.table_iops_estimate) FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' FACET OBJECT_NAME, OBJECT_SCHEMA SINCE 10 minutes ago LIMIT 10"
              }
            ]
          }
        },
        {
          "title": "Table Access Patterns",
          "layout": {
            "column": 7,
            "row": 1,
            "width": 6,
            "height": 3
          },
          "visualization": "pie",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT count(*) FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' AND metricName = 'mysql.table_iops_estimate' FACET workload_type SINCE 30 minutes ago"
              }
            ]
          }
        },
        {
          "title": "Lock Wait Analysis",
          "layout": {
            "column": 1,
            "row": 4,
            "width": 6,
            "height": 3
          },
          "visualization": "line",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT average(mysql.lock_wait_milliseconds) FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' TIMESERIES SINCE 1 hour ago FACET OBJECT_NAME"
              }
            ]
          }
        },
        {
          "title": "Lock Contention Heatmap",
          "layout": {
            "column": 7,
            "row": 4,
            "width": 6,
            "height": 3
          },
          "visualization": "heatmap",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT histogram(mysql.lock_wait_milliseconds, width: 10, buckets: 20) FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' SINCE 1 hour ago FACET OBJECT_NAME"
              }
            ]
          }
        }
      ]
    },
    {
      "name": "Index Effectiveness",
      "description": "Index usage analysis and optimization recommendations",
      "widgets": [
        {
          "title": "Index Effectiveness Overview",
          "layout": {
            "column": 1,
            "row": 1,
            "width": 4,
            "height": 2
          },
          "visualization": "billboard",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT average(mysql.index_effectiveness_score) as 'Avg Effectiveness Score' FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' SINCE 30 minutes ago"
              }
            ],
            "thresholds": [
              {
                "value": 80,
                "colorRange": "SUCCESS"
              },
              {
                "value": 50,
                "colorRange": "WARNING"
              },
              {
                "value": 0,
                "colorRange": "CRITICAL"
              }
            ]
          }
        },
        {
          "title": "Unused Indexes",
          "layout": {
            "column": 5,
            "row": 1,
            "width": 4,
            "height": 2
          },
          "visualization": "billboard",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT uniqueCount(INDEX_NAME) as 'Unused Indexes' FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' AND index_recommendation LIKE '%DROPPING%' SINCE 30 minutes ago"
              }
            ]
          }
        },
        {
          "title": "Index Size Efficiency",
          "layout": {
            "column": 9,
            "row": 1,
            "width": 4,
            "height": 2
          },
          "visualization": "billboard",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT uniqueCount(INDEX_NAME) as 'Large Indexes' FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' AND index_recommendation LIKE '%LARGE%' SINCE 30 minutes ago"
              }
            ]
          }
        },
        {
          "title": "Index Recommendations by Table",
          "layout": {
            "column": 1,
            "row": 3,
            "width": 12,
            "height": 4
          },
          "visualization": "table",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT latest(TABLE_SCHEMA) as 'Schema', latest(TABLE_NAME) as 'Table', latest(INDEX_NAME) as 'Index', latest(selectivity_pct) as 'Selectivity %', latest(usage_count) as 'Usage Count', latest(index_recommendation) as 'Recommendation' FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' AND metricName = 'mysql.index_effectiveness_score' SINCE 30 minutes ago FACET INDEX_NAME, TABLE_NAME LIMIT 20"
              }
            ]
          }
        }
      ]
    },
    {
      "name": "Resource Utilization",
      "description": "System resource usage and capacity planning",
      "widgets": [
        {
          "title": "I/O Operations Breakdown",
          "layout": {
            "column": 1,
            "row": 1,
            "width": 6,
            "height": 3
          },
          "visualization": "area",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT rate(sum(mysql.table_io_wait_count), 1 second) FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' TIMESERIES SINCE 1 hour ago FACET operation"
              }
            ]
          }
        },
        {
          "title": "I/O Wait Time",
          "layout": {
            "column": 7,
            "row": 1,
            "width": 6,
            "height": 3
          },
          "visualization": "line",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT average(mysql.table_io_wait_time_nanoseconds) / 1000000 as 'Wait Time (ms)' FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' TIMESERIES SINCE 1 hour ago"
              }
            ]
          }
        },
        {
          "title": "Temporary Resources Usage",
          "layout": {
            "column": 1,
            "row": 4,
            "width": 6,
            "height": 3
          },
          "visualization": "line",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT rate(sum(mysql.tmp_resources), 1 minute) FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' TIMESERIES SINCE 1 hour ago FACET kind"
              }
            ]
          }
        },
        {
          "title": "Sort Operations",
          "layout": {
            "column": 7,
            "row": 4,
            "width": 6,
            "height": 3
          },
          "visualization": "area",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT rate(sum(mysql.sorts), 1 minute) FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' TIMESERIES SINCE 1 hour ago FACET kind"
              }
            ]
          }
        }
      ]
    },
    {
      "name": "Alerts & Recommendations",
      "description": "Actionable insights and optimization opportunities",
      "widgets": [
        {
          "title": "Critical Performance Issues",
          "layout": {
            "column": 1,
            "row": 1,
            "width": 12,
            "height": 2
          },
          "visualization": "event_table",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT timestamp, TABLE_NAME, INDEX_NAME, index_recommendation FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' AND (index_recommendation LIKE '%DROPPING%' OR contention_level = 'critical') SINCE 1 hour ago LIMIT 20"
              }
            ]
          }
        },
        {
          "title": "Performance Optimization Score",
          "layout": {
            "column": 1,
            "row": 3,
            "width": 4,
            "height": 3
          },
          "visualization": "gauge",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT 100 - (uniqueCount(INDEX_NAME, WHERE index_recommendation != 'OK') / uniqueCount(INDEX_NAME) * 100) as 'Optimization Score' FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' AND metricName = 'mysql.index_effectiveness_score' SINCE 30 minutes ago"
              }
            ],
            "thresholds": [
              {
                "value": 90,
                "colorRange": "SUCCESS"
              },
              {
                "value": 70,
                "colorRange": "WARNING"
              },
              {
                "value": 0,
                "colorRange": "CRITICAL"
              }
            ]
          }
        },
        {
          "title": "Top Performance Bottlenecks",
          "layout": {
            "column": 5,
            "row": 3,
            "width": 8,
            "height": 3
          },
          "visualization": "bar",
          "configuration": {
            "nrqlQueries": [
              {
                "accountId": 3630072,
                "query": "SELECT average(mysql.lock_wait_milliseconds) as 'Avg Lock Wait', latest(mysql.table_iops_estimate) as 'IOPS' FROM Metric WHERE entity.type = 'MYSQL_QUERY_INTELLIGENCE' FACET OBJECT_NAME SINCE 30 minutes ago LIMIT 10"
              }
            ]
          }
        }
      ]
    }
  ]
}